[Êó•Êú¨Ë™û](README.md)

> This README is based on content generated by AI and refined by the developer.
> Last updated: 250619

# `oso` ‚Äî An Experimental Pure Rust OS for AArch64

**`oso`** is a fully handcrafted operating system written in Rust, targeting the AArch64 architecture. It aims to leverage Rust's type safety and abstraction capabilities while pursuing low-level, direct hardware control ‚Äî with no external dependencies except for fundamental tools like QEMU and the Rust toolchain itself.

From its custom UEFI bootloader to a macro-driven kernel design, `oso` is an attempt to bring abstract reasoning to bare-metal development.

### Why AArch64?

AArch64 is chosen as the primary target for the following reasons:

- Though still underrepresented in online resources, it holds high potential ‚Äî `oso` aims to be both a pioneer and a reference in this space.
- It pushes the developer (myself) to cultivate independent problem-solving skills, relying not on blog posts, but on raw specification and self-reasoning.

---

## üîß Quick Start

Before running the commands below, make sure you've [installed the necessary tools](#build).

```bash
git clone https://github.com/sugiura-hiromiti/oso.git
cd oso
cargo xt
```

## Philosophy & Characteristics

- [x] AArch64-first design
- [x] Pure Rust implementation
- [x] No external dependencies
  - The xtask crate (for developer utilities) may use dependencies
  - Some use of external crates is permitted when aligned with curiosity-driven learning, e.g.:
    - Web scraping for automatically generating implementations from specs via proc macros
- [x] Standards compliant
  - Strives to follow de facto standards, avoiding unnecessary ‚Äúoriginal formats‚Äù
- [x] Intentional Reinvention
  - Instead of mimicking existing implementations, all code is written from scratch based on primary sources (specs, technical references)
  - Aims to reinterpret what an OS can be ‚Äî and what Rust can express at the OS level
- [x] Advanced Rust usage
  - Actively explores underused features and possibilities of Rust in OS development

## Project Structure

This repository is a [Cargo workspace](https://doc.rust-lang.org/book/ch14-03-cargo-workspaces.html) composed of multiple crates:

### `oso_kernel`

The crate that constitutes the kernel body

**Features**

- Extensive use of nightly Rust features
- Module structure:
  - `app`: Application execution system
  - `base`: Basic library
  - `driver`: Device control
- Integration with other crates:
  - `oso_no_std_shared`: Shared library for no_std environment
  - `oso_proc_macro`: Automatic code generation through macros
  - `oso_error`: Error handling system

### `oso_loader`

Custom UEFI-compatible bootloader implementation.

- ELF format kernel loading functionality
- Graphics support (RGB/BGR/Bitmask formats)
- Used crates:
  - `oso_no_std_shared`
  - `oso_proc_macro`
  - `oso_error`

### `xtask`

Developer auxiliary tool suite.

- Build assistance for QEMU and UEFI targets
- Startup scripts
- Deployment and test automation processes

### Auxiliary Crates List

| Crate Name             | Description                                                                    |
| ---------------------- | ------------------------------------------------------------------------------ |
| `oso_no_std_shared`    | Provides basic data structures and utilities shared in no_std environment     |
| `oso_proc_macro_logic` | Internal logic implementation and testing for procedural macros               |
| `oso_proc_macro`       | Macro suite supporting kernel struct, parser, and test generation             |
| `oso_error`            | Common error types and error handling logic                                   |
| `util_common_code`     | General-purpose code shared between development tools                         |

## build

Requirements:

- Rust (nightly)
- QEMU
- macOS (currently required due to use of hdiutil; multi-platform support is planned)

```bash
# Build all crates, mount binaries, and launch in QEMU
cargo xt

# Partial support for x86_64 as well
cargo xt -86
```
